@{
    ViewBag.Title = "Contact me";
}
<div id="slider">
    <div class="frames">
        <div class="current frame" id="compose">
            <form method="post" class="contact">
                <section>
                    <header>
                        <h1>
                            Contact me
                        </h1>
                    </header>
                    <p>
                        Use the form below to send me an email.
                    </p>
                    <div class="field">
                        <input id="from" type="email" placeholder="From (enter your email here)" />
                    </div>
                    <div class="field">
                        <input id="subject" type="text" placeholder="Subject (so whatcha want?)" />
                    </div>
                    <div class="field">
                        <textarea id="message" placeholder="Message (don't worry, this box will grow as you type)" rows="1"
                            data-autosize="true" data-autosize-mirror="autosize-message" data-autosize-append-line="true"></textarea>
                    </div>
                    <footer>
                        @{
                            var cancelUrl = Request.UrlReferrer != null && Request.Url != null &&
                                Request.UrlReferrer.AbsolutePath != Request.Url.AbsolutePath
                                ? Request.UrlReferrer.ToString() : "/";
                        }
                        <a class="preview button">Preview &amp; Send</a>
                        <a class="cancel button" href="@cancelUrl">Cancel</a>
                    </footer>
                </section>
            </form>
        </div>
        <div class="frame" id="preview">
            <section>
                <header>
                    <h1>
                        This is what you haven't sent me yet.
                    </h1>
                </header>
                <p>
                    Read it over before sending it. Spelling counts.
                </p>
                <footer>
                    <a class="compose button">&lt;&lt; Edit</a>
                    <a class="send button">Send</a>
                </footer>
            </section>
        </div>
        <div class="frame" id="sent">
            <section>
                <header>
                    <h1>
                        Your input will be taken under advisement
                    </h1>
                </header>
                <p>
                    Maybe I'll reply, maybe I won't. Wager accordingly.
                </p>
                <footer>
                    <p>
                        If you want to be annoying, <a href="@Url.Action(MVC.Contact.Index())/">send me another email right now</a>.
                    </p>
                </footer>
            </section>
        </div>
    </div>
</div>
@section scripts
{

    @Scripts.Render("~/bundles/backbone")

    <script type="text/javascript">


        (function ($) {
            var router = new Backbone.Router({
                routes: {
                    'preview': 'preview',
                    'compose': 'compose',
                    'sent': 'sent',
                    'reset': 'reset'
                }
            });
            Backbone.history.start();
            location.hash = '/compose';

            var slider = new Slider({
                //speed: 'slow'
            });

            $('#compose .preview.button').on('click', function (e) {
                router.navigate('//preview');
                e.preventDefault();
                return false;
            });

            $('#preview .compose.button').on('click', function (e) {
                history.back();
                e.preventDefault();
                return false;
            });

            $('#preview .send.button').on('click', function (e) {
                router.navigate('//sent');
                e.preventDefault();
                return false;
            });

            router.on('route:compose', function () {
                if ($('#compose').hasClass('current')) {
                    return;
                }
                else if ($('#preview').hasClass('current')) {
                    slider.left();
                }
                else if ($('#sent').hasClass('current')) {
                    slider.left(2);
                }
            });

            router.on('route:preview', function () {
                if ($('#preview').hasClass('current')) {
                    return;
                }
                else if ($('#compose').hasClass('current')) {
                    slider.right();
                }
                else if ($('#sent').hasClass('current')) {
                    this.navigate('//compose', { replace: true });
                }
            });

            router.on('route:sent', function () {
                if ($('#sent').hasClass('current')) {
                    return;
                }
                else if ($('#preview').hasClass('current')) {
                    slider.right();
                }
                else if ($('#compose').hasClass('current')) {
                    slider.right(2);
                }
            });
        }(jQuery));
    </script>

}
